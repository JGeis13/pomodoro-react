{"version":3,"file":"static/webpack/static/development/pages/index.js.9f2ad4e7252848da2fa0.hot-update.js","sources":["webpack:///./components/Clock.jsx"],"sourcesContent":["import React, {Component} from 'react'\nimport Settings from './Settings'\nimport accurateInterval from '../functions/accurateInterval'\n\nexport default class Clock extends Component {\n  // persist timer using local storage\n  // since using Date as timer, can it keep 'running' when app is closed? \n  constructor(props){\n    super(props);\n    this.defaultVals = [5, 25, 1];\n    this.state = {\n      breakTime: this.defaultVals[0],\n      sessionTime: this.defaultVals[1],\n      currentType: 'session',\n      displayTime: this.defaultVals[1] * 60,\n      start: null,\n      timer: '',\n      isActive: false,\n      speed: 1\n    }\n\n  }\n  // Lifecycle Hooks\n\n  componentWillUnmout(){\n    this.state.timer.cancel();\n  }\n\n  tick = () => {\n    let newTime = this.state.displayTime - 1;\n    this.setState({\n      displayTime: newTime,\n    });\n    // !! Handle end of timer\n    if(newTime == 0) document.querySelector('#beep').play();\n    if(newTime < 0) return this.switchModes();\n  }\n\n  toggleSettings(e){\n    let btn = e.target;\n    let bool = btn.parentNode.classList.toggle('closed');\n    if(bool){\n      btn.style.transform = 'translateX(-311px) rotate(360deg)';\n      btn.innerText = 'settings';\n      btn.style.color = 'var(--secondary-color)';\n    }\n    else {\n      btn.style.transform = 'translateX(0px) rotate(0deg)';\n      btn.innerText = 'clear';\n      btn.style.color = 'var(--tertiary-color)';\n    }\n  }\n\n  switchModes = () => {\n    this.state.timer.cancel();\n    let newType = this.state.currentType == 'session' ? 'break' : 'session';\n    this.setState( prevState => ({\n      currentType: newType,\n      displayTime: prevState[newType + 'Time'] * 60,\n      start: Date.now(),\n      isActive: true,\n    }));\n    //this.timer = setInterval(this.tick, 200);\n    this.state.timer = accurateInterval( this.tick, 1000/this.state.speed);\n  }\n\n  handleSettingsChange = (typeStr, operation) => {\n    if(this.state.isActive) return; // change to allow adjustments while active\n    let s = this.state.sessionTime, b = this.state.breakTime, spe = this.state.speed\n    if(typeStr == 'session'){\n      if(operation == '-') s--;\n      else if(operation == '+') s++;\n      if(s > 60 || s < 1) return;\n      this.setState({sessionTime: s,}); \n    }\n    else if(typeStr == 'break'){\n      if(operation == '-') b--;\n      else if(operation == '+') b++;\n      if(b > 60 || b < 1) return;\n      this.setState({breakTime: b});\n    } else if(typeStr == 'speed'){\n      if(operation == '-') spe--;\n      else if(operation == '+') spe++;\n      if(spe > 5 || spe < 1) return;\n      this.setState({speed: spe})\n    }\n    if(this.state.currentType == 'session'){\n      this.setState({\n        displayTime: s * 60,\n      });\n    }\n    else if(this.state.currentType == 'break'){\n      this.setState({\n        displayTime: b * 60,\n      });\n    }\n  }\n\n  startStop = (e) => {\n    if(this.state.isActive){\n      document.querySelector('#start_stop i').innerText = 'play_arrow';\n      this.state.timer.cancel();\n      this.setState({isActive: false});\n    }\n    else {\n      document.querySelector('#start_stop i').innerText = 'pause';\n      this.setState({\n        isActive: true,\n      });\n      this.state.timer = accurateInterval(this.tick, 1000/this.state.speed);\n    }\n  }\n\n  reset = () => {\n    if(this.state.timer != '') this.state.timer.cancel();\n    this.setState({\n      breakTime: this.defaultVals[0],\n      sessionTime: this.defaultVals[1],\n      currentType: 'session',\n      displayTime: this.defaultVals[1] * 60,\n      start: null,\n      isActive: false,\n      speed: this.defaultVals[2]\n    });\n    document.querySelector('#beep').pause();\n    document.querySelector('#beep').currentTime = 0;\n  }\n\n  restart = () => {\n    this.state.timer.cancel();\n    document.querySelector('#start_stop i').innerText = 'play_arrow';\n    this.setState({\n      displayTime: this.state[this.state.currentType + 'Time'] * 60,\n      start: null,\n      isActive: false,\n    });\n  }\n\n  formatDisplayTime = () => {\n    let mins = Math.floor(this.state.displayTime / 60);\n    let secs = this.state.displayTime % 60;\n    if(mins < 10 ) mins = '0' + mins.toString();\n    if(secs < 10) secs = '0' + secs.toString();\n    return mins + ':' + secs;\n  }\n\n  render(){\n    return (\n      <div id='clock'>\n        <h2>Pomodoro Clock</h2>\n        <Settings  \n          breakTime={this.state.breakTime} \n          sessionTime={this.state.sessionTime}\n          settingsChange={this.handleSettingsChange}\n          reset={this.reset}\n          toggleShow={this.toggleSettings}\n          speed={this.state.speed}\n          />\n        <div id='main'>\n          <div className='circleDisplay'>\n            <label id='timer-label'>{this.state.currentType}</label>\n            <label id='time-left'>{this.formatDisplayTime()}</label>\n            <audio id='beep'><source src='https://soundbible.com/mp3/Electronic_Chime-KevanGC-495939803.mp3' type='audio/mpeg' /></audio>\n          </div>\n        </div>\n        <div className='controls'>\n          <button className='btn' onClick={this.restart} id='restart'>\n            <i className=\"material-icons\">replay</i>\n          </button>\n          <button className='btn btn-main' onClick={this.startStop} id='start_stop'>\n            <i className=\"material-icons\">play_arrow</i>\n          </button>\n          <button className='btn' onClick={this.getInfo} id='info'>\n            <i className=\"material-icons\">info</i>\n          </button>\n        </div>\n        <div className='credits'>\n          Created by Jarick Geiselmayr\n        </div>\n      </div>\n    );\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAsBA;AACA;AAAA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;AA9BA;AA+CA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AACA;AACA;AAKA;AACA;AACA;AA1DA;AA4DA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AAEA;AACA;AADA;AAGA;AACA;AACA;AA1FA;AA4FA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AAzGA;AA2GA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AAQA;AACA;AACA;AACA;AAxHA;AA0HA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAlIA;AAoIA;AACA;AACA;AACA;AACA;AACA;AACA;AAxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAHA;AAcA;AACA;AACA;;;AACA;AACA;AACA;;;AAYA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AA+FA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAjLA;AACA;;;;;A","sourceRoot":""}